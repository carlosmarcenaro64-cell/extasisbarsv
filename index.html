<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extasis Bar-Motel</title>
    
    <!-- 1. Cargamos Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Definimos tus colores personalizados -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'extasis-purple': '#9A00FF',
                        'extasis-black': '#111111',
                        'extasis-gray': '#1c1c1c',
                        'table-free': '#059669', // Verde
                        'table-occupied': '#DC2626', // Rojo
                    },
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <!-- 3. SCRIPTS DE FIREBASE (El siguiente paso) -->
    <!-- Dejamos el espacio para conectar Firebase más adelante -->
    <!-- 
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot, collection } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
    
        // TODO: Add YOUR Firebase Configuration
        const firebaseConfig = {
            apiKey: "...",
            authDomain: "...",
            projectId: "...",
            storageBucket: "...",
            messagingSenderId: "...",
            appId: "..."
        };

        // Initialize Firebase
        // const app = initializeApp(firebaseConfig);
        // const auth = getAuth(app);
        // const db = getFirestore(app);
    </script>
    -->
    
    <!-- 4. Estilos base -->
    <style type="text/css">
        body {
            font-family: 'Inter', sans-serif;
        }
        .glow-shadow {
            box-shadow: 0 4px 30px rgba(154, 0, 255, 0.2);
        }
        #lista-consumo-total::-webkit-scrollbar,
        #lista-carrito::-webkit-scrollbar {
            display: none;
        }
        #lista-consumo-total,
        #lista-carrito {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* Estilo para las mesas */
        .table-box {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .table-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(154, 0, 255, 0.3);
        }
        
        /* --- NUEVO: ESTILOS PARA EFECTO GLITCH --- */
        .glitch-wrapper {
            position: relative;
        }
        
        .glitch {
            position: relative;
            z-index: 1;
        }

        .glitch::before,
        .glitch::after {
            content: attr(data-text); /* Toma el texto del atributo data-text */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
        }

        .glitch::before {
            left: 2px;
            text-shadow: -2px 0 #ff00c1; /* Color del glitch (magenta) */
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }

        .glitch::after {
            left: -2px;
            text-shadow: -2px 0 #00fff9; /* Color del glitch (cian) */
            animation: glitch-anim-2 2s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip-path: polygon(0 2%, 100% 2%, 100% 5%, 0 5%); }
            10% { clip-path: polygon(0 15%, 100% 15%, 100% 15%, 0 15%); }
            20% { clip-path: polygon(0 10%, 100% 10%, 100% 20%, 0 20%); }
            30% { clip-path: polygon(0 30%, 100% 30%, 100% 30%, 0 30%); }
            40% { clip-path: polygon(0 25%, 100% 25%, 100% 30%, 0 30%); }
            50% { clip-path: polygon(0 50%, 100% 50%, 100% 55%, 0 55%); }
            60% { clip-path: polygon(0 70%, 100% 70%, 100% 70%, 0 70%); }
            70% { clip-path: polygon(0 90%, 100% 90%, 100% 95%, 0 95%); }
            80% { clip-path: polygon(0 60%, 100% 60%, 100% 65%, 0 65%); }
            90% { clip-path: polygon(0 80%, 100% 80%, 100% 80%, 0 80%); }
            100% { clip-path: polygon(0 50%, 100% 50%, 100% 55%, 0 55%); }
        }

        @keyframes glitch-anim-2 {
            0% { clip-path: polygon(0 5%, 100% 5%, 100% 10%, 0 10%); }
            10% { clip-path: polygon(0 20%, 100% 20%, 100% 20%, 0 20%); }
            20% { clip-path: polygon(0 35%, 100% 35%, 100% 40%, 0 40%); }
            30% { clip-path: polygon(0 50%, 100% 50%, 100% 50%, 0 50%); }
            40% { clip-path: polygon(0 45%, 100% 45%, 100% 50%, 0 50%); }
            50% { clip-path: polygon(0 60%, 100% 60%, 100% 65%, 0 65%); }
            60% { clip-path: polygon(0 80%, 100% 80%, 100% 80%, 0 80%); }
            70% { clip-path: polygon(0 60%, 100% 60%, 100% 65%, 0 65%); }
            80% { clip-path: polygon(0 40%, 100% 40%, 100% 45%, 0 45%); }
            90% { clip-path: polygon(0 70%, 100% 70%, 100% 70%, 0 70%); }
            100% { clip-path: polygon(0 90%, 100% 90%, 100% 95%, 0 95%); }
        }
        /* --- FIN DE ESTILOS GLITCH --- */

        /* --- NUEVO: ESTILOS PARA LA PANTALLA DE CARGA --- */
        #loader {
            position: fixed;
            inset: 0;
            z-index: 200;
            background-color: #111111;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease-out;
        }
        .spinner {
            width: 64px;
            height: 64px;
            border: 8px solid;
            border-color: #9A00FF transparent #9A00FF transparent;
            border-radius: 50%;
            animation: spin-anim 1.2s linear infinite;
        }
        @keyframes spin-anim {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* --- FIN DE ESTILOS DE CARGA --- */
    </style>
</head>

<body class="bg-extasis-black text-white">

    <!-- ====================================================== -->
    <!--            NUEVA: PANTALLA DE CARGA                   -->
    <!-- ====================================================== -->
    <div id="loader">
        <div class="spinner"></div>
    </div>

    <!-- ====================================================== -->
    <!--  NUEVO: MODAL DE BIENVENIDA (PARA INICIAR MÚSICA)     -->
    <!-- ====================================================== -->
    <div id="welcome-modal" class="hidden fixed inset-0 bg-extasis-black z-[150] flex items-center justify-center p-4">
        <div class="bg-extasis-gray p-10 rounded-lg shadow-2xl glow-shadow w-full max-w-md text-center">
            <h2 class="text-4xl font-bold mb-4 text-extasis-purple">EXTASIS</h2>
            <p class="text-lg mb-8">La noche tiene un nuevo significado.</p>
            <button id="enter-btn" class="w-full bg-extasis-purple text-white text-xl font-bold py-4 px-10 rounded-lg hover:bg-purple-700 transition-colors shadow-lg glow-shadow">
                Entrar (con música)
            </button>
            <button id="enter-quiet-btn" class="mt-4 w-full text-gray-400 text-lg py-2 px-10 rounded-lg hover:text-white transition-colors">
                Entrar en silencio
            </button>
        </div>
    </div>

    <!-- ====================================================== -->
    <!--      NUEVO: REPRODUCTOR DE YOUTUBE OCULTO              -->
    <!-- ====================================================== -->
    <div id="player" class="absolute -top-96 left-0"></div>


    <!-- BARRA DE NAVEGACIÓN PRINCIPAL (Ahora oculta al inicio) -->
    <nav id="navbar-main" class="hidden bg-extasis-black/80 backdrop-blur-md sticky top-0 z-50 shadow-lg shadow-extasis-purple/10">
        <!-- ... (código de navegación sin cambios) ... -->
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center h-20">
                <!-- Logo -->
                <a href="#" id="logo-btn" class="text-3xl font-bold text-extasis-purple drop-shadow-[0_2px_2px_rgba(0,0,0,0.5)]">
                    EXTASIS
                </a>
                
                <!-- Menú de Navegación (para pantallas grandes) -->
                <div class="hidden md:flex space-x-8 text-lg items-center">
                    <a href="#inicio" class="hover:text-extasis-purple transition-colors">Inicio</a>
                    <a href="motel.html" class="hover:text-extasis-purple transition-colors">Motel</a>
                    <!-- BOTÓN DE LOGIN -->
                    <button id="show-login-btn" class="bg-extasis-purple text-white font-bold py-2 px-6 rounded-lg hover:bg-purple-700 transition-colors shadow-lg glow-shadow">
                        Login
                    </button>
                </div>
                
                <!-- Botón (para pantallas pequeñas) -->
                <div class="md:hidden flex items-center space-x-4">
                     <button id="show-login-btn-mobile" class="bg-extasis-purple text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors text-sm">
                        Login
                    </button>
                    <button id="menu-btn" class="text-white focus:outline-none">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Menú Móvil (oculto por defecto) -->
        <div id="mobile-menu" class="hidden md:hidden bg-extasis-gray text-center">
            <a href="#inicio" class="block py-3 px-4 text-lg hover:bg-extasis-purple">Inicio</a>
            <a href="motel.html" class="block py-3 px-4 text-lg hover:bg-extasis-purple">Motel</a>
        </div>
    </nav>

    <!-- ====================================================== -->
    <!--            PÁGINA PÚBLICA (Ahora oculta al inicio)     -->
    <!-- ====================================================== -->
    <main id="public-site" class="hidden">
        <!-- SECCIÓN INICIO (HERO) -->
        <section id="inicio" class="h-screen flex items-center justify-center text-center bg-cover bg-center" style="background-image: linear-gradient(rgba(17, 17, 17, 0.7), rgba(17, 17, 17, 0.7)), url('https://placehold.co/1920x1080/111111/9A00FF?text=Extasis');">
            <div class="px-4">
                <!-- MODIFICADO: Añadido wrapper y clases 'glitch' -->
                <div classs="glitch-wrapper">
                    <h1 class="glitch text-6xl md:text-8xl font-extrabold text-white drop-shadow-lg" data-text="EXTASIS">
                        <span class="text-extasis-purple">EXTASIS</span>
                    </h1>
                </div>
                <h2 class="text-3xl md:text-5xl font-light mt-4 mb-10">Bar - Motel</h2>
                <p class="text-xl md:text-2xl mb-12 max-w-2xl mx-auto">La noche tiene un nuevo significado. Descubre una experiencia sensorial única.</p>
                <!-- MODIFICADO: Este botón ahora apunta a motel.html -->
                <a href="motel.html" class="bg-extasis-purple text-white text-xl font-bold py-4 px-10 rounded-lg hover:bg-purple-700 transition-colors shadow-lg glow-shadow">
                    Reserva tu Habitación
                </a>
            </div>
        </section>

        <!-- SECCIÓN PROGRAMACIÓN (DISCOTECA) -->
        <section id="programacion" class="py-24 bg-extasis-gray">
             <!-- ... (código sin cambios) ... -->
        </footer>
    </main>

    <!-- ====================================================== -->
    <!--            PANTALLA DE LOGIN (AHORA CON GOOGLE)        -->
    <!-- ====================================================== -->
    <section id="login-screen" class="hidden fixed inset-0 bg-extasis-black z-[100] flex items-center justify-center p-4">
        <div class="bg-extasis-gray p-10 rounded-lg shadow-2xl glow-shadow w-full max-w-md text-center">
            <h2 class="text-4xl font-bold mb-8 text-extasis-purple">Bienvenido</h2>
            <p class="text-lg mb-8">Inicia sesión para ver las mesas disponibles.</p>
            
            <!-- Botón real de Login con Google -->
            <button id="google-login-btn" class="w-full bg-white text-gray-800 text-lg font-bold py-4 px-10 rounded-lg hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center">
                <img src="https://www.google.com/images/hpp/ic_wahlberg_product_core_48.png8.png" alt="Google Logo" class="w-6 h-6 mr-4">
                Iniciar Sesión con Google
            </button>
            
            <button id="cancel-login-btn" class="mt-6 text-gray-400 hover:text-white">
                Volver al inicio
            </button>
        </div>
    </section>
    
    <!-- ====================================================== -->
    <!--     NUEVA PANTALLA: SELECCIÓN DE 12 MESAS             -->
    <!-- ====================================================== -->
    <section id="table-selection-screen" class="hidden fixed inset-0 bg-extasis-black z-[100] p-4 pt-24 overflow-y-auto">
        <div class="container mx-auto max-w-4xl text-center">
            <h2 class="text-4xl font-bold mb-4">¡Hola, <span id="user-name" class="text-extasis-purple">Usuario</span>!</h2>
            <p class="text-xl text-gray-300 mb-12">Selecciona tu mesa para comenzar.</p>
            
            <div id="table-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <!-- Las 12 mesas se generarán aquí con JavaScript -->
                <!-- Ejemplo de cómo se vería una mesa:
                <button class="table-box bg-table-free h-32 rounded-lg flex flex-col justify-center items-center glow-shadow" data-table-id="1">
                    <span class="text-4xl font-bold">Mesa</span>
                    <span class="text-5xl font-bold">1</span>
                </button>
                <button class="table-box bg-table-occupied h-32 rounded-lg flex flex-col justify-center items-center glow-shadow" data-table-id="2">
                    <span class="text-4xl font-bold">Mesa</span>
                    <span class="text-5xl font-bold">2</span>
                    <span class="text-sm font-bold mt-1">(Ocupada)</span>
                </button>
                -->
            </div>
            
             <p id="tables-full-msg" class="hidden text-2xl text-red-500 mt-12">
                ¡Lo sentimos! Todas las mesas están ocupadas.
                <br>
                Por favor, espera un momento y vuelve a intentarlo.
            </p>

            <button id="logout-from-tables-btn" class="mt-12 text-gray-400 hover:text-white">
                Cerrar Sesión
            </button>
        </div>
    </section>


    <!-- ====================================================== -->
    <!--     PANTALLA DE APP "MI MESA" (Ahora dinámica)         -->
    <!-- ====================================================== -->
    <main id="app-screen" class="hidden">
        <!-- Header de la App (se actualiza con la mesa) -->
        <header class="bg-extasis-gray sticky top-0 z-50 shadow-lg shadow-extasis-purple/10">
            <div class="container mx-auto px-4 flex justify-between items-center h-20">
                <div class="text-xl">
                    <span id="app-user-name" class="font-bold text-extasis-purple">Usuario</span>
                </div>
                <div class="text-right">
                    <div class="text-lg font-bold">Mesa 
                        <span id="app-table-number" class="text-extasis-purple text-2xl">?</span>
                    </div>
                    <button id="logout-btn" class="text-sm text-gray-400 hover:text-white">Cerrar Sesión</button>
                </div>
            </div>
        </header>

        <!-- Contenido de la App (Inventario y Cuenta) -->
        <div class="container mx-auto p-4 md:p-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <!-- Columna 1: Inventario (Menú) -->
                <div class="lg:col-span-2">
                    <!-- ... (código de inventario sin cambios) ... -->
                    <h2 class="text-4xl font-bold mb-8">Inventario (Menú)</h2>
                    <div class="mb-8">
                        <button id="app-btn-bebidas" class="app-tab-btn text-xl font-bold py-2 px-6 border-b-4 border-extasis-purple text-extasis-purple">Bebidas</button>
                        <button id="app-btn-comida" class="app-tab-btn text-xl font-bold py-2 px-6 text-gray-500 border-b-4 border-transparent hover:text-extasis-purple">Comida</button>
                    </div>

                    <!-- INICIO DE INVENTARIO BEBIDAS APP ACTUALIZADO -->
                    <div id="app-menu-bebidas" class="app-menu-content space-y-6">
                        
                        <!-- Sin Alcohol App -->
                        <div>
                            <h3 class="text-2xl font-bold mb-4 text-gray-400">Sin Alcohol</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Agua Botella</h4><p class="text-gray-300">$2.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Agua Botella" data-precio="2.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Coca-Cola</h4><p class="text-gray-300">$3.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Coca-Cola" data-precio="3.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Pepsi</h4><p class="text-gray-300">$3.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Pepsi" data-precio="3.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Fanta</h4><p class="text-gray-300">$3.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Fanta" data-precio="3.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Red Bull</h4><p class="text-gray-300">$5.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Red Bull" data-precio="5.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Limonada Fresca</h4><p class="text-gray-300">$4.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Limonada Fresca" data-precio="4.00">+</button>
                                </div>
                            </div>
                        </div>

                        <!-- Con Alcohol App -->
                        <div>
                            <h3 class="text-2xl font-bold mb-4 text-gray-400">Con Alcohol</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Margarita Extasis</h4><p class="text-gray-300">$12.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Margarita Extasis" data-precio="12.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Gin Tónic Púrpura</h4><p class="text-gray-300">$15.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Gin Tónic Púrpura" data-precio="15.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Mojito Clásico</h4><p class="text-gray-300">$10.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Mojito Clásico" data-precio="10.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Cerveza Nacional</h4><p class="text-gray-300">$5.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Cerveza Nacional" data-precio="5.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Cerveza Importada</h4><p class="text-gray-300">$7.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Cerveza Importada" data-precio="7.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Copa de Vino</h4><p class="text-gray-300">$8.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Copa de Vino" data-precio="8.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Shot de Tequila</h4><p class="text-gray-300">$6.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Shot de Tequila" data-precio="6.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Trago de Whisky</h4><p class="text-gray-300">$9.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Trago de Whisky" data-precio="9.00">+</button>
                                </div>
                                <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                                    <div><h4 class="text-lg font-bold">Botella Ron</h4><p class="text-gray-300">$75.00</p></div>
                                    <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Botella Ron" data-precio="75.00">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- FIN DE INVENTARIO BEBIDAS APP -->

                    <!-- INICIO DE INVENTARIO COMIDA APP ACTUALIZADO -->
                    <div id="app-menu-comida" class="app-menu-content hidden grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Alitas BBQ-Mora (10)</h4><p class="text-gray-300">$14.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Alitas BBQ-Mora" data-precio="14.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Nachos Extasis</h4><p class="text-gray-300">$18.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Nachos Extasis" data-precio="18.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Mini Hamburguesas (3)</h4><p class="text-gray-300">$16.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Mini Hamburguesas" data-precio="16.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Tacos de Birria (3)</h4><p class="text-gray-300">$15.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Tacos de Birria" data-precio="15.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Papas Trufadas</h4><p class="text-gray-300">$10.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Papas Trufadas" data-precio="10.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Quesadilla (Pollo)</h4><p class="text-gray-300">$12.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Quesadilla (Pollo)" data-precio="12.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Papas Fritas Clásicas</h4><p class="text-gray-300">$7.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Papas Fritas" data-precio="7.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Dedos de Queso (6)</h4><p class="text-gray-300">$9.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Dedos de Queso" data-precio="9.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Ceviche Fusión</h4><p class="text-gray-300">$17.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Ceviche Fusión" data-precio="17.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Calamares Fritos</h4><p class="text-gray-300">$15.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Calamares Fritos" data-precio="15.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Tabla de Carnes</h4><p class="text-gray-300">$25.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Tabla de Carnes" data-precio="25.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Tabla de Quesos</h4><p class="text-gray-300">$22.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Tabla de Quesos" data-precio="22.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Pizza Pepperoni</h4><p class="text-gray-300">$13.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Pizza Pepperoni" data-precio="13.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Brochetas de Res</h4><p class="text-gray-300">$14.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Brochetas de Res" data-precio="14.00">+</button>
                        </div>
                        <div class="bg-extasis-gray p-4 rounded-lg flex justify-between items-center glow-shadow">
                            <div><h4 class="text-lg font-bold">Brownie c/ Helado</h4><p class="text-gray-300">$8.00</p></div>
                            <button class="add-item-btn bg-extasis-purple w-12 h-12 text-3xl font-bold rounded-full hover:bg-purple-700" data-nombre="Brownie c/ Helado" data-precio="8.00">+</button>
                        </div>
                    </div>
                    <!-- FIN DE INVENTARIO COMIDA APP -->
                </div>

                <!-- Columna 2: Mi Cuenta (Consumo) -->
                <div class="bg-extasis-gray rounded-lg p-6 shadow-2xl glow-shadow h-fit sticky top-28">
                    <!-- ... (código de 'Mi Cuenta' sin cambios) ... -->
                    <h2 class="text-3xl font-bold mb-6 border-b border-gray-700 pb-4">Nuevo Pedido</h2>
                    <div id="lista-carrito" class="max-h-48 overflow-y-auto pr-2 space-y-4">
                        <p id="carrito-vacio" class="text-gray-400 text-center py-6">Agrega items...</p>
                    </div>
                    <div class="mt-4 pt-4 border-t border-gray-700">
                        <div class="flex justify-between items-center text-xl font-bold">
                            <span>Total Pedido:</span>
                            <span id="total-carrito" class="text-extasis-purple">$0.00</span>
                        </div>
                    </div>
                    <button id="confirmar-pedido-btn" class="mt-6 w-full bg-purple-700 text-white text-lg font-bold py-3 rounded-lg hover:bg-purple-600 transition-colors shadow-lg">
                        Confirmar y Enviar Pedido
                    </button>
                    <h2 class="text-3xl font-bold mt-8 mb-6 border-b border-gray-700 pb-4">Consumo Acumulado</h2>
                    <div id="lista-consumo-total" class="max-h-48 overflow-y-auto pr-2 space-y-4">
                        <p id="consumo-total-vacio" class="text-gray-400 text-center py-6">Tu cuenta está en cero.</p>
                    </div>
                    <div class="mt-4 pt-4 border-t border-gray-700">
                        <div class="flex justify-between items-center text-2xl font-bold">
                            <span>Total a Pagar:</span>
                            <span id="total-general" class="text-extasis-purple">$0.00</span>
                        </div>
                    </div>
                    <button id="pagar-btn" class="mt-8 w-full bg-extasis-purple text-white text-xl font-bold py-4 rounded-lg hover:bg-purple-700 transition-colors shadow-lg glow-shadow">
                        Ver QR para Pagar en Caja
                    </button>
                </div>
            </div>
        </div>
    </main>
    
    <!-- MODAL DE PAGO (QR) (Ahora dinámico) -->
    <div id="modal-pago" class="hidden fixed inset-0 bg-black/80 z-[110] flex items-center justify-center p-4">
        <div class="bg-extasis-gray p-10 rounded-lg shadow-2xl glow-shadow w-full max-w-md text-center relative">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h2 class="text-3xl font-bold mb-6 text-extasis-purple">Pagar en Caja</h2>
            <p class="text-lg mb-6">Muestra este QR en la caja para pagar tu cuenta y habilitar tu salida.</p>
            <!-- El QR ahora mostrará el número de mesa dinámicamente -->
            <img id="qr-code-img" src="https://placehold.co/300x300/ffffff/111111?text=Tu+QR+de+Pago%0AMesa+?" alt="QR de Pago" class="mx-auto rounded-lg">
            <div class="mt-6 text-2xl font-bold">
                Total a Pagar: <span id="modal-total" class="text-extasis-purple">$0.00</span>
            </div>
        </div>
    </div>
    

    <!-- ====================================================== -->
    <!--            SCRIPT DE JAVASCRIPT (LÓGICA)               -->
    <!-- ====================================================== -->
    
    <!-- NUEVO: API de YouTube IFrame -->
    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        // --- NUEVO: Lógica de Carga y Música ---
        let player;
        const videoId = 'z_LWYDWDP34'; // ID del video 'Estasis'

        // 1. Esta función crea el reproductor de YouTube
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '390',
                width: '640',
                videoId: videoId,
                playerVars: {
                    'autoplay': 0, // No auto-reproducir al cargar
                    'controls': 0, // Sin controles
                    'loop': 1, // Repetir
                    'playlist': videoId // Necesario para que 'loop' funcione
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        // 2. Esta función se llama cuando el reproductor está listo
        function onPlayerReady(event) {
            // El reproductor está listo, pero no hacemos nada hasta que el usuario haga clic.
            event.target.setVolume(50); // Poner volumen a la mitad
        }

        // 3. Elementos de la nueva lógica de carga
        const loader = document.getElementById('loader');
        const welcomeModal = document.getElementById('welcome-modal');
        const enterBtn = document.getElementById('enter-btn');
        const enterQuietBtn = document.getElementById('enter-quiet-btn');
        
        // --- ELEMENTOS DE LA PÁGINA PÚBLICA ---
        const publicSite = document.getElementById('public-site');
        const navbarMain = document.getElementById('navbar-main');
        // ... (resto de elementos)

        // 4. Cuando la ventana de la página se carga COMPLETAMENTE
        window.onload = () => {
            // Ocultar el spinner
            loader.style.opacity = '0';
            setTimeout(() => {
                loader.classList.add('hidden');
            }, 500); // Dar tiempo a la transición

            // Mostrar el modal de bienvenida
            welcomeModal.classList.remove('hidden');
        };

        // 5. Función para mostrar el sitio
        function showSite() {
            welcomeModal.classList.add('hidden');
            publicSite.classList.remove('hidden');
            navbarMain.classList.remove('hidden');
        }

        // 6. Event Listeners de los botones de entrada
        enterBtn.addEventListener('click', () => {
            showSite();
            // ¡Aquí sí podemos reproducir música!
            if (player && typeof player.playVideo === 'function') {
                player.playVideo();
            }
        });

        enterQuietBtn.addEventListener('click', () => {
            showSite();
            // No hacer nada con la música
        });

        // 7. Parar la música si el usuario cierra sesión
        function stopMusic() {
            if (player && typeof player.stopVideo === 'function') {
                player.stopVideo();
            }
        }
        
        // --- FIN DE LÓGICA DE CARGA ---


        document.addEventListener('DOMContentLoaded', () => {

            // --- ESTADO GLOBAL (Simulación) ---
            let carrito = [];
            let consumoTotal = [];
            let totalCarrito = 0.0;
            let totalGeneral = 0.0;
            let currentTableId = null; // Guardará el número de mesa
            let currentUserName = "Usuario"; // Guardará el nombre del usuario

            // --- SIMULACIÓN DE BASE DE DATOS DE MESAS ---
            // En la vida real, esto vendría de Firebase
            let DATO_SIMULADO_MESAS = [
                { id: 1, status: 'free' },
                { id: 2, status: 'occupied' },
                { id: 3, status: 'free' },
                { id: 4, status: 'free' },
                { id: 5, status: 'occupied' },
                { id: 6, status: 'free' },
                { id: 7, status: 'free' },
                { id: 8, status: 'occupied' },
                { id: 9, status: 'free' },
                { id: 10, status: 'free' },
                { id: 11, status: 'free' },
                { id: 12, status: 'occupied' },
            ];

            // --- ELEMENTOS DE LA PÁGINA PÚBLICA ---
            const publicSite = document.getElementById('public-site');
            const navbarMain = document.getElementById('navbar-main');
            const menuBtn = document.getElementById('menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const btnBebidas = document.getElementById('btn-bebidas');
            const btnComida = document.getElementById('btn-comida');
            const menuBebidas = document.getElementById('menu-bebidas');
            const menuComida = document.getElementById('menu-comida');
            // Elementos del formulario de reserva eliminados de aquí
            // const reservaForm = document.getElementById('reserva-form');
            // const confirmacionReserva = document.getElementById('confirmacion-reserva');
            const logoBtn = document.getElementById('logo-btn');

            // --- ELEMENTOS DE LOGIN Y SELECCIÓN DE MESA ---
            const loginScreen = document.getElementById('login-screen');
            const tableSelectionScreen = document.getElementById('table-selection-screen');
            const appScreen = document.getElementById('app-screen');
            const showLoginBtn = document.getElementById('show-login-btn');
            const showLoginBtnMobile = document.getElementById('show-login-btn-mobile');
            const cancelLoginBtn = document.getElementById('cancel-login-btn');
            const googleLoginBtn = document.getElementById('google-login-btn');
            const logoutFromTablesBtn = document.getElementById('logout-from-tables-btn');
            const userNameEl = document.getElementById('user-name');
            const tableGrid = document.getElementById('table-grid');
            const tablesFullMsg = document.getElementById('tables-full-msg');

            // --- ELEMENTOS DE "MI MESA" ---
            const appUserName = document.getElementById('app-user-name');
            const appTableNumber = document.getElementById('app-table-number');
            const logoutBtn = document.getElementById('logout-btn');
            const appBtnBebidas = document.getElementById('app-btn-bebidas');
            const appBtnComida = document.getElementById('app-btn-comida');
            const appMenuBebidas = document.getElementById('app-menu-bebidas');
            const appMenuComida = document.getElementById('app-menu-comida');
            const addItemButtons = document.querySelectorAll('.add-item-btn');
            const listaCarrito = document.getElementById('lista-carrito');
            const carritoVacio = document.getElementById('carrito-vacio');
            const totalCarritoEl = document.getElementById('total-carrito');
            const confirmarPedidoBtn = document.getElementById('confirmar-pedido-btn');
            const listaConsumoTotal = document.getElementById('lista-consumo-total');
            const consumoTotalVacio = document.getElementById('consumo-total-vacio');
            const totalGeneralEl = document.getElementById('total-general');

            // --- ELEMENTOS DEL MODAL DE PAGO ---
            const pagarBtn = document.getElementById('pagar-btn');
            const modalPago = document.getElementById('modal-pago');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const modalTotal = document.getElementById('modal-total');
            const qrCodeImg = document.getElementById('qr-code-img');

            // --- LÓGICA DE NAVEGACIÓN (Pública vs App) ---

            function mostrarPaginaPublica() {
                publicSite.classList.remove('hidden');
                navbarMain.classList.remove('hidden');
                loginScreen.classList.add('hidden');
                tableSelectionScreen.classList.add('hidden');
                appScreen.classList.add('hidden');
            }

            function mostrarLogin() {
                publicSite.classList.add('hidden');
                navbarMain.classList.add('hidden');
                loginScreen.classList.remove('hidden');
                tableSelectionScreen.classList.add('hidden');
                appScreen.classList.add('hidden');
                mobileMenu.classList.add('hidden');
            }
            
            function mostrarSeleccionDeMesa(userName) {
                currentUserName = userName; // Guardar nombre
                userNameEl.textContent = currentUserName; // Poner nombre en saludo
                
                publicSite.classList.add('hidden');
                navbarMain.classList.add('hidden');
                loginScreen.classList.add('hidden');
                tableSelectionScreen.classList.remove('hidden');
                appScreen.classList.add('hidden');
                
                // Dibujar las mesas
                dibujarMesas();
            }

            function mostrarApp(tableId) {
                currentTableId = tableId; // Guardar número de mesa
                
                // Actualizar el header de la app
                appUserName.textContent = currentUserName;
                appTableNumber.textContent = currentTableId;

                // Actualizar el QR de pago (para cuando se use)
                const qrText = `Tu QR de Pago%0AMesa ${currentTableId}`;
                qrCodeImg.src = `https://placehold.co/300x300/ffffff/111111?text=${qrText}`;
                
                publicSite.classList.add('hidden');
                navbarMain.classList.add('hidden');
                loginScreen.classList.add('hidden');
                tableSelectionScreen.classList.add('hidden');
                appScreen.classList.remove('hidden');
                
                // Resetear la app al entrar
                resetApp();
            }
            
            // --- Event Listeners de Navegación ---
            logoBtn.addEventListener('click', () => {
                mostrarPaginaPublica();
                stopMusic(); // Parar música al ir al inicio
            });
            showLoginBtn.addEventListener('click', mostrarLogin);
            cancelLoginBtn.addEventListener('click', () => {
                mostrarPaginaPublica();
                stopMusic(); // Parar música si cancela login
            });
            logoutFromTablesBtn.addEventListener('click', () => {
                mostrarPaginaPublica();
                stopMusic(); // Parar música al cerrar sesión
            });
            logoutBtn.addEventListener('click', () => {
                mostrarPaginaPublica();
                stopMusic(); // Parar música al cerrar sesión
            });
            
            // --- Simulación de Login ---
            googleLoginBtn.addEventListener('click', () => {
                // En un app real, aquí se llamaría a signInWithPopup(auth, provider)
                // Simulación:
                const simulatedUserName = "Cliente"; // (En la vida real, vendría de Google)
                mostrarSeleccionDeMesa(simulatedUserName);
            });


            // --- LÓGICA DE SELECCIÓN DE MESA ---
            
            function dibujarMesas() {
                tableGrid.innerHTML = ''; // Limpiar la grilla
                let freeTables = 0;
                
                DATO_SIMULADO_MESAS.forEach(mesa => {
                    const button = document.createElement('button');
                    button.dataset.tableId = mesa.id;
                    button.classList.add('table-box', 'h-32', 'rounded-lg', 'flex', 'flex-col', 'justify-center', 'items-center', 'glow-shadow');
                    
                    let content = `
                        <span class="text-4xl font-bold">Mesa</span>
                        <span class="text-5xl font-bold">${mesa.id}</span>
                    `;
                    
                    if (mesa.status === 'free') {
                        freeTables++;
                        button.classList.add('bg-table-free');
                        button.addEventListener('click', () => {
                            // Marcar la mesa como ocupada (simulación)
                            mesa.status = 'occupied';
                            // Mostrar la app
                            mostrarApp(mesa.id);
                        });
                    } else {
                        button.classList.add('bg-table-occupied', 'opacity-60', 'cursor-not-allowed');
                        content += `<span class="text-sm font-bold mt-1">(Ocupada)</span>`;
                        button.disabled = true;
                    }
                    
                    button.innerHTML = content;
                    tableGrid.appendChild(button);
                });
                
                // Mostrar mensaje si no hay mesas libres
                if (freeTables === 0) {
                    tablesFullMsg.classList.remove('hidden');
                } else {
                    tablesFullMsg.classList.add('hidden');
                }
            }


            // --- LÓGICA DE LA PÁGINA PÚBLICA ---
            // (Menú Móvil, Pestañas, Formulario de Reserva)
            menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => mobileMenu.classList.add('hidden'));
            });

            function switchTab(targetBtn, targetContent, buttons, contents) {
                buttons.forEach(btn => {
                    btn.classList.remove('text-extasis-purple', 'border-extasis-purple');
                    btn.classList.add('text-gray-500', 'border-transparent');
                });
                targetBtn.classList.add('text-extasis-purple', 'border-extasis-purple');
                targetBtn.classList.remove('text-gray-500', 'border-transparent');
                
                contents.forEach(content => content.classList.add('hidden'));
                targetContent.classList.remove('hidden');
            }
            
            const publicTabButtons = [btnBebidas, btnComida];
            const publicTabContents = [menuBebidas, menuComida];
            btnBebidas.addEventListener('click', () => switchTab(btnBebidas, menuBebidas, publicTabButtons, publicTabContents));
            btnComida.addEventListener('click', () => switchTab(btnComida, menuComida, publicTabButtons, publicTabContents));

            // Lógica del formulario de reserva eliminada de aquí
            /*
            reservaForm.addEventListener('submit', (e) => {
                e.preventDefault(); 
                confirmacionReserva.classList.remove('hidden');
                reservaForm.reset();
                setTimeout(() => confirmacionReserva.classList.add('hidden'), 5000);
            });
            */

            // --- LÓGICA DE LA APP "MI MESA" ---

            // Pestañas del Inventario (App)
            const appTabButtons = [appBtnBebidas, appBtnComida];
            const appTabContents = [appMenuBebidas, appMenuComida];
            appBtnBebidas.addEventListener('click', () => switchTab(appBtnBebidas, appMenuBebidas, appTabButtons, appTabContents));
            appBtnComida.addEventListener('click', () => switchTab(appBtnComida, appMenuComida, appTabButtons, appTabContents));

            // Añadir al Carrito
            addItemButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const nombre = button.dataset.nombre;
                    const precio = parseFloat(button.dataset.precio);
                    carrito.push({ nombre, precio });
                    totalCarrito += precio;
                    actualizarCarritoUI();
                });
            });

            // Confirmar Pedido
            confirmarPedidoBtn.addEventListener('click', () => {
                if (carrito.length === 0) return;
                consumoTotal.push(...carrito);
                totalGeneral += totalCarrito;
                carrito = [];
                totalCarrito = 0.0;
                actualizarCarritoUI();
                actualizarConsumoTotalUI();
            });

            // Actualizar UI del Carrito
            function actualizarCarritoUI() {
                carritoVacio.classList.toggle('hidden', carrito.length > 0);
                listaCarrito.innerHTML = '';
                carrito.forEach(item => {
                    listaCarrito.innerHTML += `
                        <div class="flex justify-between items-center text-md">
                            <span>${item.nombre}</span>
                            <span class="font-bold">$${item.precio.toFixed(2)}</span>
                        </div>`;
                });
                totalCarritoEl.textContent = `$${totalCarrito.toFixed(2)}`;
            }
            
            // Actualizar UI del Consumo Total
            function actualizarConsumoTotalUI() {
                consumoTotalVacio.classList.toggle('hidden', consumoTotal.length > 0);
                listaConsumoTotal.innerHTML = '';
                consumoTotal.forEach(item => {
                    listaConsumoTotal.innerHTML += `
                        <div class="flex justify-between items-center text-lg">
                            <span>${item.nombre}</span>
                            <span class="font-bold">$${item.precio.toFixed(2)}</span>
                        </div>`;
                });
                totalGeneralEl.textContent = `$${totalGeneral.toFixed(2)}`;
            }
            
            // Resetear la App (al cambiar de mesa o hacer logout)
            function resetApp() {
                carrito = [];
                consumoTotal = [];
                totalCarrito = 0.0;
                totalGeneral = 0.0;
                actualizarCarritoUI();
                actualizarConsumoTotalUI();
                switchTab(appBtnBebidas, appMenuBebidas, appTabButtons, appTabContents);
            }

            // Lógica del Modal de Pago
            pagarBtn.addEventListener('click', () => {
                if (totalGeneral > 0) {
                    modalTotal.textContent = `$${totalGeneral.toFixed(2)}`;
                    modalPago.classList.remove('hidden');
                } else {
                    // (En un app real, no se usa alert)
                    // (Mostraríamos un modal de error)
                    alert("Tu cuenta está en $0.00. ¡Confirma un pedido primero!");
                }
            });
            
            closeModalBtn.addEventListener('click', () => {
                modalPago.classList.add('hidden');
            });
        });
    </script>

</body>
</html>
